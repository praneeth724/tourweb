=========================================
CEYLON ECO TRAILS - BOOKING SYSTEM SETUP
=========================================

This booking system uses MySQL database with PHP backend to store and manage tour bookings.

-------------------
FILES CREATED:
-------------------
1. database_setup.sql       - Database schema and tables
2. db_config.php           - Database configuration file
3. process_booking.php     - Booking submission handler
4. booking.js (updated)    - Frontend JavaScript with AJAX integration

-------------------
SETUP INSTRUCTIONS:
-------------------

STEP 1: Install Prerequisites
------------------------------
- Install XAMPP, WAMP, or MAMP (includes Apache, MySQL, and PHP)
- Download from: https://www.apachefriends.org/ (for XAMPP)

STEP 2: Setup Database
------------------------------
1. Start XAMPP/WAMP and launch MySQL and Apache servers

2. Open phpMyAdmin in your browser:
   http://localhost/phpmyadmin

3. Create a new database:
   - Click "New" in the left sidebar
   - Database name: ceylonecotrails
   - Collation: utf8mb4_unicode_ci
   - Click "Create"

4. Import the database schema:
   - Select the "ceylonecotrails" database
   - Click on "SQL" tab
   - Copy and paste the contents of "database_setup.sql"
   - Click "Go" to execute

STEP 3: Configure Database Connection
------------------------------
1. Open "db_config.php" in a text editor

2. Update the database credentials (if needed):
   - DB_HOST: Usually 'localhost'
   - DB_USER: Default is 'root'
   - DB_PASS: Default is empty '' (set your password if configured)
   - DB_NAME: 'ceylonecotrails'

Example:
   define('DB_HOST', 'localhost');
   define('DB_USER', 'root');
   define('DB_PASS', '');  // Add your password here if set
   define('DB_NAME', 'ceylonecotrails');

STEP 4: Move Files to Web Server
------------------------------
1. Copy all your HTML project files to the web server directory:

   For XAMPP: C:\xampp\htdocs\ceylonecotrails\
   For WAMP:  C:\wamp64\www\ceylonecotrails\
   For MAMP:  /Applications/MAMP/htdocs/ceylonecotrails/

2. Make sure all these files are in the same folder:
   - index.html
   - booking.html
   - booking.js
   - db_config.php
   - process_booking.php
   - All other HTML, CSS, and JS files

STEP 5: Test the System
------------------------------
1. Open your browser and go to:
   http://localhost/ceylonecotrails/booking.html

2. Fill out the booking form with test data

3. Submit the form

4. Check if booking was successful (you should see a confirmation modal)

5. Verify data in database:
   - Go to phpMyAdmin: http://localhost/phpmyadmin
   - Select "ceylonecotrails" database
   - Click on "bookings" table
   - Click "Browse" to see all bookings

-------------------
DATABASE STRUCTURE:
-------------------

Table: bookings
---------------
- id (Primary Key)
- tour_name
- tour_price
- first_name
- last_name
- email
- phone
- country
- number_of_people
- preferred_date
- special_requirements
- payment_method
- currency
- total_amount
- booking_reference (Unique)
- booking_status (pending/confirmed/cancelled)
- created_at (Timestamp)
- updated_at (Timestamp)

Table: booking_stats
--------------------
- id
- total_bookings
- total_revenue
- last_updated

-------------------
FEATURES:
-------------------
- Form validation (frontend and backend)
- Secure data insertion with prepared statements
- SQL injection protection
- Unique booking reference generation
- Booking statistics tracking
- Error handling and user feedback
- AJAX form submission (no page reload)
- JSON API responses

-------------------
VIEWING BOOKINGS:
-------------------

To view all bookings in phpMyAdmin:
1. Go to http://localhost/phpmyadmin
2. Select "ceylonecotrails" database
3. Click "bookings" table
4. Click "Browse" tab

To export bookings data:
1. Select the "bookings" table
2. Click "Export" tab
3. Choose format (CSV, Excel, PDF, etc.)
4. Click "Go"

-------------------
TROUBLESHOOTING:
-------------------

Problem: "Database connection failed"
Solution:
- Check if MySQL is running in XAMPP/WAMP
- Verify database credentials in db_config.php
- Ensure database "ceylonecotrails" exists

Problem: "Table 'bookings' doesn't exist"
Solution:
- Run the database_setup.sql script in phpMyAdmin
- Check if tables were created successfully

Problem: "Access denied for user"
Solution:
- Update DB_USER and DB_PASS in db_config.php
- Check MySQL user permissions

Problem: Form submits but no data in database
Solution:
- Check browser console for JavaScript errors
- Verify process_booking.php path is correct
- Check PHP error logs in XAMPP/WAMP

-------------------
SECURITY NOTES:
-------------------
- This is a development/demonstration setup
- For production use:
  1. Use environment variables for database credentials
  2. Enable HTTPS/SSL
  3. Implement proper authentication
  4. Add rate limiting
  5. Implement email verification
  6. Use proper error logging (not display_errors)
  7. Add CSRF protection
  8. Sanitize and validate all inputs thoroughly

-------------------
NEXT STEPS:
-------------------
Optional enhancements you can add:
- Admin panel to view/manage bookings
- Email confirmation system
- Payment gateway integration
- Booking cancellation feature
- PDF booking confirmation generator
- SMS notifications
- Calendar integration

-------------------
SUPPORT:
-------------------
If you encounter any issues:
1. Check XAMPP/WAMP error logs
2. Check browser console for JavaScript errors
3. Verify all files are in the correct directory
4. Ensure file permissions are correct

For PHP errors, check:
- XAMPP: C:\xampp\apache\logs\error.log
- WAMP: C:\wamp64\logs\apache_error.log

=========================================
