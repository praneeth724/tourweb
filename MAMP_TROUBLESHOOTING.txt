=====================================
MAMP DATABASE CONNECTION TROUBLESHOOTING
=====================================

ISSUE: Database not connecting with MAMP
-----------------------------------------

STEP-BY-STEP FIX:

1. CHECK MAMP IS RUNNING
   - Open MAMP application
   - Make sure both Apache and MySQL servers are started (green lights)
   - If not started, click "Start Servers"

2. FIND YOUR MYSQL PORT
   - Open MAMP
   - Click "Preferences" or "Settings"
   - Go to "Ports" tab
   - Note the MySQL port number (usually 3306 or 8889)

   Common MAMP ports:
   - Standard: 3306
   - MAMP default: 8889

3. RUN CONNECTION TEST
   - Open your browser
   - Go to: http://localhost/ceylonecotrails/test_connection.php
   - This will test all connection methods
   - Look for which test shows "Success âœ“"
   - Note the working host and port

4. UPDATE db_config.php
   - Open db_config.php in a text editor
   - Update these lines based on test results:

   If test shows localhost:3306 works:
   define('DB_HOST', 'localhost');
   define('DB_PORT', '3306');

   If test shows localhost:8889 works:
   define('DB_HOST', 'localhost');
   define('DB_PORT', '8889');

   If test shows 127.0.0.1:3306 works:
   define('DB_HOST', '127.0.0.1');
   define('DB_PORT', '3306');

5. CREATE DATABASE
   - Open browser and go to: http://localhost/phpMyAdmin
   - Or: http://localhost:8888/phpMyAdmin (MAMP)
   - Click "New" on left sidebar
   - Database name: ceylonecotrails
   - Collation: utf8mb4_unicode_ci
   - Click "Create"

6. IMPORT DATABASE TABLES
   - In phpMyAdmin, select "ceylonecotrails" database
   - Click "SQL" tab at the top
   - Click "Choose File" or copy/paste the contents of database_setup.sql
   - Click "Go"
   - You should see message "Query OK" or similar

7. VERIFY TABLES CREATED
   - In phpMyAdmin, select "ceylonecotrails" database
   - You should see tables:
     * bookings
     * booking_stats
   - If you see these, database setup is complete!

8. TEST THE BOOKING FORM
   - Go to: http://localhost/ceylonecotrails/booking.html
   - Fill out the form
   - Submit
   - Check for confirmation message

9. VIEW BOOKINGS
   - Go to: http://localhost/ceylonecotrails/view_bookings.php
   - You should see your test booking

COMMON ERRORS AND SOLUTIONS:
----------------------------

ERROR: "Access denied for user 'root'@'localhost'"
SOLUTION:
- Check password in db_config.php
- MAMP default password is usually 'root'
- Try these combinations:
  User: root, Password: root
  User: root, Password: (empty)

ERROR: "Unknown database 'ceylonecotrails'"
SOLUTION:
- Database doesn't exist yet
- Follow step 5 above to create it

ERROR: "Can't connect to MySQL server on 'localhost'"
SOLUTION:
- MySQL is not running
- Start MAMP servers
- Check correct port is being used

ERROR: "Table 'bookings' doesn't exist"
SOLUTION:
- Tables not created yet
- Follow step 6 above to import database_setup.sql

ERROR: "Connection refused"
SOLUTION:
- Wrong port number
- Run test_connection.php to find correct port
- Update DB_PORT in db_config.php

ERROR: File not found errors in browser
SOLUTION:
- Files not in correct directory
- Move all files to MAMP's htdocs folder
- Path should be: C:\MAMP\htdocs\ceylonecotrails\
- Access via: http://localhost/ceylonecotrails/

QUICK CHECKLIST:
---------------
[ ] MAMP is installed and running
[ ] Both Apache and MySQL servers are started (green)
[ ] Correct port number in db_config.php
[ ] Database 'ceylonecotrails' exists
[ ] Tables 'bookings' and 'booking_stats' exist
[ ] All files in htdocs/ceylonecotrails/ folder
[ ] test_connection.php shows successful connection

USEFUL URLS:
-----------
phpMyAdmin: http://localhost/phpMyAdmin or http://localhost:8888/phpMyAdmin
Test Connection: http://localhost/ceylonecotrails/test_connection.php
Booking Form: http://localhost/ceylonecotrails/booking.html
View Bookings: http://localhost/ceylonecotrails/view_bookings.php

STILL NOT WORKING?
-----------------
Check PHP error logs:
- MAMP logs location: C:\MAMP\logs\php_error.log
- Check browser console (F12) for JavaScript errors
- Make sure mysqli extension is enabled in PHP

Need to enable error display:
- Open process_booking.php
- Find: ini_set('display_errors', 1);
- Make sure it's set to 1 for debugging

=====================================
